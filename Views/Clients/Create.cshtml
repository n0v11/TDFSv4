@model TDFSv4.Models.Client;
@{
    ViewBag.Title = "Добавление клиента";
}
<form asp-action="create" asp-controller="Clients" id="ClientForm">
    <div class="form-group">
        <label asp-for="Name" class="control-label">Имя</label>
        <input asp-for="Name" class="form-control" />
    </div>
    <div class="form-group">
        <label asp-for="Type" class="control-label">Тип</label>
        <select asp-for="TypeId" asp-items="ViewBag.Types"></select>
    </div>
    @*<div class="form-group">
            <label asp-for="Founder" class="control-label">Учредитель</label>
            <input type="text" asp-for="Founder" class="form-control" />
        </div>*@
<div class="form-group">
    <label asp-for="Tin" class="control-label">ИНН клиента</label>
    <input type="number" asp-for="Tin" class="form-control" />

    @*<input asp-for="Founders[0].Fio" class="form-control" />
    <input asp-for="Founders[0].Tin" class="form-control" />*@
</div>
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" id="CreateFounderButton">
        Добавить учредителя
    </button>

    <div class="form-group">
        <input type="submit" value="Отправить" />
    </div>
</form>

@*Создание учредителя *@
<!--<div class="modal" tabindex="-1" id="CreateFounder">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Создание учредителя</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="control-label">ФИО учредителя</label>
                    <input type="text" id="FounderFIO" class="form-control" />
                </div>
                <div class="form-group">
                    <label class="control-label">ИНН учредителя</label>
                    <input type="text" id="FounderTIN" class="form-control" />
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" id="SaveFounder" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>-->
<script>
    $("#CreateFounderButton").click(function () {
        let form = $('#ClientForm');
        var lastField = form.find(".founder:last");

        var i = (lastField && lastField.length && lastField.data("idx") + 1) || 0;

        if (form.find('[name=TypeId]').val() == 2 && i > 0)
            return;

        var fieldsWrap = $(`<div class=\"form-group\ founder" />`);
        var fields = $(`<input type=\"text\" class=\"form-control\" name=\"Founders[${i}].Fio\"/>
<input type=\"text\" class=\"form-control\" name=\"Founders[${i}].Tin\"/>`);
        fieldsWrap.data("idx", i);

        var removeButton = $("<input type=\"button\" value=\"-\" />");
        removeButton.click(function () {
            $(this).parent().remove();
        });

        fieldsWrap.append(fields);
        fieldsWrap.append(removeButton);
        form.append(fieldsWrap);
    });
</script>